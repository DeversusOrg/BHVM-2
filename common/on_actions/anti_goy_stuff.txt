on_actions = {
    on_weekly = {
        effect = {
            every_country = {
                every_owned_state = {
                    limit = {
                        OR = {
                            has_building = { type = arms_factory level > 21 }
                            has_building = { type = industrial_complex level > 21 }
                            has_building = { type = air_base level > 11 }
                        }
                    }
                    # Broadcast the event globally
                    every_country = {
                        
                        if = {
                            limit = { NOT = { has_country_flag = mute_cheat_event_flag } }
                            news_event = {
                                id = cheat.2
                                days = 0
                                from = ROOT   # Use ROOT to refer to the violating country
                                state = THIS  # Pass the state information
                            }
                        }
                    }
                    if = {
                        limit = { NOT = { has_country_flag = mute_cheat_sound_flag } }
                        sound_effect = "cheat_sound_effect"
                    }
                }
            }
        }
    }
    on_monthly = {
        effect = {
            every_country = {
                if = {
                    limit = {
                        any_army_leader = {
                            NOT = { has_trait = hax }
                            OR = {
                                AND = {
                                    has_trait = panzer_expert
                                    has_trait = combined_arms_expert
                                }
                                AND = {
                                    has_trait = infantry_expert
                                    has_trait = ambusher
                                }
                                AND = {
                                    has_trait = fortress_buster
                                    has_trait = scavenger
                                }
                                AND = {
                                    has_trait = offensive_doctrine
                                    has_trait = defensive_doctrine
                                }
                                AND = {
                                    has_trait = aggressive_assaulter
                                    has_trait = unyielding_defender
                                }
                                AND = {
                                    has_trait = cavalry_expert
                                    has_trait = combined_arms_expert
                                }
                                
                                AND = {
                                    if = {
                                        has_game_rule = {
                                            rule = BHVM_adaptable
                                            option = off
                                        }
                                        has_trait = adaptable  
                                    }
                                }
                                AND = {
                                    if = {
                                        has_game_rule = {
                                            rule = BHVM_thorough_planner
                                            option = off
                                        }
                                        has_trait = thorough_planner
                                    }
                                }
                            }
                        }
                    }
                    random_army_leader = {
                        limit = {
                            NOT = { has_trait = hax }
                            OR = {
                                AND = {
                                    has_trait = panzer_expert
                                    has_trait = combined_arms_expert
                                }
                                AND = {
                                    has_trait = infantry_expert
                                    has_trait = ambusher
                                }
                                AND = {
                                    has_trait = fortress_buster
                                    has_trait = scavenger
                                }
                                AND = {
                                    has_trait = offensive_doctrine
                                    has_trait = defensive_doctrine
                                }
                                AND = {
                                    has_trait = aggressive_assaulter
                                    has_trait = unyielding_defender
                                }
                                AND = {
                                    has_trait = cavalry_expert
                                    has_trait = combined_arms_expert
                                }
                                
                                AND = {
                                    if = {
                                        has_game_rule = {
                                            rule = BHVM_adaptable
                                            option = off
                                        }
                                        has_trait = adaptable  
                                    }
                                }
                                AND = {
                                    if = {
                                        has_game_rule = {
                                            rule = BHVM_thorough_planner
                                            option = off
                                        }
                                        has_trait = thorough_planner
                                    }
                                }
                            }
                        }
                        add_unit_leader_trait = hax
                    }
                    add_timed_idea = {
                        idea = illegal_trait_config_cheater_idea
                        days = 8
                    }
                    if = {
                        limit = { NOT = { has_country_flag = mute_cheat_event_flag } }
                        every_country = {
                            news_event = {
                                id = cheat.4
                                days = 0
                            }
                        }
                    }
                    if = {
                        limit = { NOT = { has_country_flag = mute_cheat_sound_flag } }
                        sound_effect = "cheat_sound_effect"
                    }
                }
            }
        }
    }
    on_weekly = { # ANTI x2 INDUSTRY
        effect = {
            every_country = {
                limit = {
                    NOT = { has_country_flag = double_industry }
                    NOT = { has_idea = double_industry_cheater_idea }
                    OR = {
                        # FIRST INDUSTRIES
                        AND = {
                            has_tech = concentrated_industry
                            has_tech = dispersed_industry
                        }
                        AND = {
                            has_tech = concentrated_industry2
                            has_tech = dispersed_industry2
                        }
                        AND = {
                            has_tech = concentrated_industry3
                            has_tech = dispersed_industry3
                        }
                        AND = {
                            has_tech = concentrated_industry4
                            has_tech = dispersed_industry4
                        }
                        AND = {
                            has_tech = concentrated_industry5
                            has_tech = dispersed_industry5
                        }
                        AND = {
                            has_tech = flexible_line
                            has_tech = streamlined_line
                        }
                    }
                }
                set_technology = {
                    concentrated_industry = 0
                    dispersed_industry = 0
                    concentrated_industry2 = 0
                    dispersed_industry2 = 0
                    concentrated_industry3 = 0
                    dispersed_industry3 = 0
                    concentrated_industry4 = 0
                    dispersed_industry4 = 0
                    concentrated_industry5 = 0
                    dispersed_industry5 = 0
                    improved_machine_tools = 0 
                    basic_machine_tools = 0
                    advanced_machine_tools = 0
                    assembly_line_production = 0
                    flexible_line = 0
                    streamlined_line = 0
                }
                set_country_flag = double_industry
                add_timed_idea = {
                    idea = double_industry_cheater_idea
                    days = 8
                }
                every_country = {
                    if = {
                        limit = { NOT = { has_country_flag = mute_cheat_event_flag } }
                        news_event = {
                            id = cheat.3
                            days = 0
                        }
                    }
                    if = {
                        limit = { NOT = { has_country_flag = mute_cheat_sound_flag } }
                        sound_effect = "cheat_sound_effect"
                    }
                }
            }
            every_country = {
                if = {
                    limit = {
                        has_country_flag = double_industry
                        NOT = { has_idea = double_industry_cheater_idea }
                    }
                    clr_country_flag = double_industry
                }
            }
        }
    }
}
